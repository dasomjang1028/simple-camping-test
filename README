# MBTI ê¸°ë°˜ ìº í•‘ ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸

ğŸ•ï¸ **ìº í•‘ì„ ì‚¬ë‘í•˜ëŠ” ë‹¹ì‹ ì˜ MBTI ì„±í–¥ì„ ì•Œì•„ë³´ì„¸ìš”!**

ê°œì¸ì˜ MBTI ì„±í–¥ì— ë”°ë¥¸ ìº í•‘ ìŠ¤íƒ€ì¼ì„ ë¶„ì„í•˜ê³ , ë§ì¶¤í˜• ìº í•‘ ì¥ë¹„ í• ì¸ ì¿ í°ì„ ì œê³µí•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

## ğŸŒŸ ì£¼ìš” ê¸°ëŠ¥

- **ğŸ§  MBTI ê¸°ë°˜ ìº í•‘ ìŠ¤íƒ€ì¼ ë¶„ì„**: 16ê°€ì§€ ìº í•‘ ìŠ¤íƒ€ì¼ ê²°ê³¼ ì œê³µ
- **ğŸ“Š ì‹¤ì‹œê°„ í†µê³„**: Google Sheets ê¸°ë°˜ ì‹¤ì‹œê°„ ì‘ë‹µì í†µê³„
- **ğŸŸï¸ ë§ì¶¤í˜• ì¿ í° ë°œê¸‰**: MBTI íƒ€ì…ë³„ ê°œì¸í™”ëœ í• ì¸ ì¿ í°
- **ğŸ“± ë°˜ì‘í˜• ë””ìì¸**: ëª¨ë°”ì¼/ë°ìŠ¤í¬íƒ‘ ìµœì í™”
- **â˜ï¸ í´ë¼ìš°ë“œ ì—°ë™**: Google Apps Script & Google Sheets ìë™ ì €ì¥

## ğŸ¯ ìº í•‘ ìŠ¤íƒ€ì¼ ìœ í˜•

### ğŸ“Š 16ê°€ì§€ MBTI ìº í•‘ ìŠ¤íƒ€ì¼
- **ENFP**: ì—´ì •ì  íƒí—˜ê°€ ğŸŒŸ
- **ENFJ**: ì˜ê°ì„ ì£¼ëŠ” ê°€ì´ë“œ ğŸ§­
- **ENTP**: ì°½ì˜ì  ì‹¤í—˜ê°€ ğŸ”¬
- **ENTJ**: ì™„ë²½ì£¼ì˜ ë¦¬ë” ìº í¼ ğŸ‘‘
- **ESFP**: ììœ ë¡œìš´ ë¶„ìœ„ê¸° ë©”ì´ì»¤ ğŸª
- **ESFJ**: ë”°ëœ»í•œ ì¼€ì–´í…Œì´ì»¤ ğŸ¤—
- **ESTP**: ì¦‰í¥ì  ëª¨í—˜ê°€ ğŸƒâ€â™‚ï¸
- **ESTJ**: ì²´ê³„ì  ìº í•‘ ë§ˆìŠ¤í„° ğŸ“‹
- **INFP**: ê°ì„±ì  ì˜ˆìˆ ê°€ ğŸ¨
- **INFJ**: ì‹ ì¤‘í•œ ë¹„ì „ ìº í¼ ğŸ”®
- **INTP**: ë…¼ë¦¬ì  ë¶„ì„ê°€ ğŸ¤”
- **INTJ**: ì „ëµì  ìº í•‘ ë§ˆìŠ¤í„° â™Ÿï¸
- **ISFP**: í‰í™”ë¡œìš´ ìì—°ì¸ ğŸŒ¿
- **ISFJ**: ì‹ ì¤‘í•œ ì „í†µì£¼ì˜ì ğŸ›ï¸
- **ISTP**: ì‹¤ìš©ì  ê¸°ìˆ ì ğŸ”§
- **ISTJ**: ê³„íšì  ì „í†µ ìº í¼ ğŸ“š

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: HTML5, CSS3, JavaScript (Vanilla)
- **Backend**: Google Apps Script
- **Database**: Google Sheets
- **Design**: ë°˜ì‘í˜• ì›¹ ë””ìì¸, CSS Grid/Flexbox

## ğŸ“¦ ì„¤ì¹˜ ë° ì„¤ì •

### 1ë‹¨ê³„: íŒŒì¼ ë‹¤ìš´ë¡œë“œ
```bash
git clone https://github.com/YOUR_USERNAME/mbti-camping-test.git
cd mbti-camping-test
```

### 2ë‹¨ê³„: Google Sheets ì„¤ì •
1. [Google Drive](https://drive.google.com)ì—ì„œ ìƒˆ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ìƒì„±
2. ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ì´ë¦„ì„ "MBTI ìº í•‘ í…ŒìŠ¤íŠ¸ ê²°ê³¼"ë¡œ ë³€ê²½
3. URLì—ì„œ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ID ë³µì‚¬
   ```
   https://docs.google.com/spreadsheets/d/[SPREADSHEET_ID]/edit
   ```

### 3ë‹¨ê³„: Google Apps Script ì„¤ì •
1. [Google Apps Script](https://script.google.com) ì ‘ì†
2. "ìƒˆ í”„ë¡œì íŠ¸" ìƒì„±
3. `google-apps-script.js` íŒŒì¼ì˜ ëª¨ë“  ì½”ë“œë¥¼ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ê¸°
4. 8ë²ˆì§¸ ì¤„ì˜ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ID êµì²´:
   ```javascript
   const SPREADSHEET_ID = 'YOUR_GOOGLE_SPREADSHEET_ID_HERE';
   ```
5. í”„ë¡œì íŠ¸ ì´ë¦„ì„ "MBTI ìº í•‘ ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸"ë¡œ ë³€ê²½

### 4ë‹¨ê³„: ì›¹ ì•± ë°°í¬
1. Google Apps Scriptì—ì„œ **"ë°°í¬" â†’ "ìƒˆ ë°°í¬"** í´ë¦­
2. ì‹¤í–‰ í™˜ê²½: **"ëˆ„êµ¬ë‚˜"**
3. ì•¡ì„¸ìŠ¤ ê¶Œí•œ: **"ëˆ„êµ¬ë‚˜"**
4. **"ë°°í¬"** í´ë¦­
5. ì›¹ ì•± URL ë³µì‚¬

### 5ë‹¨ê³„: HTML íŒŒì¼ ì„¤ì •
1. `simple-camping-test.html` íŒŒì¼ ì—´ê¸°
2. 861ë²ˆì§¸ ì¤„ì˜ URL êµì²´:
   ```javascript
   url: 'YOUR_COPIED_WEB_APP_URL_HERE'
   ```

### 6ë‹¨ê³„: í…ŒìŠ¤íŠ¸
1. `simple-camping-test.html` íŒŒì¼ì„ ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°
2. í…ŒìŠ¤íŠ¸ ì§„í–‰ í›„ Google Sheetsì— ë°ì´í„° ì €ì¥ í™•ì¸

## ğŸ¨ ì£¼ìš” í™”ë©´

### ë©”ì¸ í™”ë©´
- ìº í•‘ í…Œë§ˆì˜ ë”°ëœ»í•œ ë””ìì¸
- ëª…í™•í•œ CTA ë²„íŠ¼
- ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

### ì§ˆë¬¸ í™”ë©´
- í”„ë¡œê·¸ë ˆìŠ¤ ë°”
- ë’¤ë¡œê°€ê¸° ê¸°ëŠ¥
- ì§ê´€ì ì¸ ì„ íƒ ë²„íŠ¼

### ê²°ê³¼ í™”ë©´
- MBTI íƒ€ì…ë³„ ë§ì¶¤ ê²°ê³¼
- ì‹¤ì‹œê°„ í†µê³„ ì •ë³´
- ê°œì¸í™”ëœ ì¿ í° ì œê³µ
- ê²°ê³¼ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
- SNS ê³µìœ  ê¸°ëŠ¥

## ğŸ“Š ë°ì´í„° êµ¬ì¡°

### í…ŒìŠ¤íŠ¸ê²°ê³¼ ì‹œíŠ¸
| ì—´ | í•­ëª© | ì„¤ëª… |
|---|---|---|
| A | ì™„ë£Œì¼ì‹œ | í…ŒìŠ¤íŠ¸ ì™„ë£Œ ì‹œê°„ (KST) |
| B | MBTIíƒ€ì… | ê²°ê³¼ MBTI íƒ€ì… (ì˜ˆ: ENFP) |
| C | ê²°ê³¼ì œëª© | ìº í•‘ ìŠ¤íƒ€ì¼ ì œëª© |
| D | ìº í•‘ë¹ˆë„ | ì—°ê°„ ìº í•‘ íšŸìˆ˜ |
| E | ì£¼ìš”ë™ë°˜ì | ì£¼ë¡œ í•¨ê»˜í•˜ëŠ” ì‚¬ëŒ |
| F | IPì£¼ì†Œ | ì‚¬ìš©ì ì‹ë³„ì |
| G | ì‚¬ìš©ìì—ì´ì „íŠ¸ | ë¸Œë¼ìš°ì € ì •ë³´ |
| H | ë¦¬í¼ëŸ¬ | ìœ ì… ê²½ë¡œ |
| I | ì „ì²´ì‘ë‹µJSON | ëª¨ë“  ë‹µë³€ ë°ì´í„° |

### ì¿ í°ë°œê¸‰ ì‹œíŠ¸
| ì—´ | í•­ëª© | ì„¤ëª… |
|---|---|---|
| A | ë°œê¸‰ì¼ì‹œ | ì¿ í° ë°œê¸‰ ì‹œê°„ (KST) |
| B | ì¿ í°ì½”ë“œ | ê³ ìœ  ì¿ í° ì½”ë“œ |
| C | MBTIíƒ€ì… | ê²°ê³¼ MBTI íƒ€ì… |
| D | í• ì¸ê¸ˆì•¡ | 34,000ì› ê³ ì • |
| E | ì‚¬ìš©ìƒíƒœ | ë¯¸ì‚¬ìš©/ì‚¬ìš©ì™„ë£Œ |
| F | IPì£¼ì†Œ | ì‚¬ìš©ì ì‹ë³„ì |
| G | ì‚¬ìš©ìì—ì´ì „íŠ¸ | ë¸Œë¼ìš°ì € ì •ë³´ |

## ğŸ”§ API ì—”ë“œí¬ì¸íŠ¸

Google Apps Scriptì—ì„œ ì œê³µí•˜ëŠ” API:

### GET ìš”ì²­
- **`?action=ping`**: ì—°ê²° í…ŒìŠ¤íŠ¸
- **`?action=get_stats`**: ì‹¤ì‹œê°„ í†µê³„ ì¡°íšŒ

### POST ìš”ì²­
- **`save_test_result`**: í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì €ì¥
- **`issue_coupon`**: ì¿ í° ë°œê¸‰

## ğŸ¯ íŠ¹ì§•

### ğŸ”’ ë³´ì•ˆ
- ë¯¼ê°í•œ ì •ë³´ëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬
- í´ë¼ì´ì–¸íŠ¸ ì‹ë³„ì„ ìœ„í•œ íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ ID ì‚¬ìš©

### ğŸ“ˆ ì‹¤ì‹œê°„ í†µê³„
- Google Sheets ë°ì´í„° ê¸°ë°˜ ì‹¤ì‹œê°„ í¼ì„¼í‹°ì§€ ê³„ì‚°
- 16ê°œ MBTI íƒ€ì…ë³„ ë¶„í¬ í˜„í™©

### ğŸ¨ UX/UI
- ìº í•‘ í…Œë§ˆì˜ ì¼ê´€ëœ ë””ìì¸
- ì§ê´€ì ì¸ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
- ëª¨ë°”ì¼ ì¹œí™”ì  ë°˜ì‘í˜• ë””ìì¸

### âš¡ ì„±ëŠ¥
- ë°”ë‹ë¼ JavaScriptë¡œ ë¹ ë¥¸ ë¡œë”©
- ìµœì í™”ëœ ì´ë¯¸ì§€ ë° ë¦¬ì†ŒìŠ¤

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ `LICENSE` íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì§ˆë¬¸ì´ë‚˜ ì œì•ˆì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ì£¼ì„¸ìš”!

---

â­ **ì´ í”„ë¡œì íŠ¸ê°€ ìœ ìš©í–ˆë‹¤ë©´ ë³„í‘œë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”!**
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ì˜ ìº í•‘ ìŠ¤íƒ€ì¼ì€?</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/variable/pretendardvariable.css");
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background: linear-gradient(135deg, #F5F5DC 0%, #FDF5E6 50%, #FAF0E6 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            font-feature-settings: "tnum";
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            max-width: 480px;
            width: 100%;
            padding: 32px 24px;
            text-align: center;
            position: relative;
            margin: 16px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        h1 {
            color: #2E7D32;
            font-size: 32px;
            font-weight: 700;
            line-height: 1.4;
            letter-spacing: -0.02em;
            margin-bottom: 8px;
        }

        h2 {
            color: #2E7D32;
            font-size: 24px;
            font-weight: 600;
            line-height: 1.45;
            letter-spacing: -0.01em;
            margin-bottom: 24px;
        }

        .main-image {
            font-size: 80px;
            margin: 24px 0;
        }

        .subtitle {
            color: #6B7280;
            font-size: 16px;
            font-weight: 400;
            line-height: 1.6;
            letter-spacing: -0.005em;
            margin-bottom: 40px;
        }

        .btn {
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            font-size: 16px;
            font-weight: 600;
            line-height: 1.5;
            letter-spacing: -0.005em;
            cursor: pointer;
            margin: 8px auto;
            transition: background-color 0.2s ease, box-shadow 0.2s ease;
            color: white;
            width: 100%;
            max-width: 400px;
            display: block;
            border: 1px solid transparent;
        }

        .btn:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-primary {
            background: #4CAF50;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-primary:hover {
            background: #45a049;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.25);
        }

        .btn-coupon {
            background: #1565C0;
            box-shadow: 0 4px 15px rgba(13, 71, 161, 0.4);
        }

        .btn-coupon:hover {
            background: #0D47A1;
            box-shadow: 0 4px 12px rgba(13, 71, 161, 0.3);
        }

        .btn-share {
            background: #4CAF50;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-share:hover {
            background: #2E7D32;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.25);
        }

        .btn-restart {
            background: #B0BEC5;
            box-shadow: 0 4px 15px rgba(176, 190, 197, 0.3);
        }

        .btn-restart:hover {
            background: #90A4AE;
            box-shadow: 0 4px 12px rgba(176, 190, 197, 0.25);
        }

        .btn-contact {
            background: linear-gradient(135deg, #ff7043, #ff5722);
            box-shadow: 0 4px 15px rgba(255, 112, 67, 0.3);
        }

        .btn-contact:hover {
            background: linear-gradient(135deg, #ff5722, #e64a19);
            box-shadow: 0 6px 20px rgba(255, 112, 67, 0.4);
        }

        .btn-contact:disabled {
            background: #ccc;
            box-shadow: none;
        }

        .progress-bar {
            background: #F3F4F6;
            height: 6px;
            border-radius: 6px;
            margin: 16px 0;
            overflow: hidden;
        }

        .progress {
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            height: 100%;
            transition: width 0.3s ease;
        }

        .question-counter {
            color: #9CA3AF;
            font-size: 14px;
            font-weight: 500;
            line-height: 1.4;
            margin-bottom: 16px;
        }

        .question {
            font-size: 20px;
            font-weight: 600;
            color: #1F2937;
            line-height: 1.5;
            letter-spacing: -0.01em;
            margin-bottom: 24px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: #F9FAFB;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            font-size: 15px;
            font-weight: 500;
            line-height: 1.5;
            letter-spacing: -0.005em;
            color: #374151;
        }

        .option:hover {
            border-color: #4CAF50;
            background: #F0FDF4;
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.12);
        }

        .result-card {
            background: #FFFFFF;
            border-radius: 20px;
            padding: 32px;
            margin: 24px 0;
            text-align: center;
            border: 1px solid #E5E7EB;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            position: relative;
            overflow: hidden;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4CAF50, #2E7D32);
        }

        .result-emoji {
            font-size: 80px;
            margin: 16px 0 24px 0;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
        }

        .result-badge {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
            font-size: 12px;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 16px;
            letter-spacing: 0.5px;
        }

        .result-title {
            color: #1F2937;
            font-size: 32px;
            font-weight: 800;
            line-height: 1.2;
            letter-spacing: -0.025em;
            margin: 8px 0 16px 0;
            background: linear-gradient(135deg, #2E7D32, #4CAF50);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .result-subtitle {
            color: #6B7280;
            font-size: 18px;
            font-weight: 500;
            line-height: 1.5;
            letter-spacing: -0.005em;
            margin-bottom: 24px;
        }

        .result-description {
            color: #4B5563;
            font-size: 15px;
            font-weight: 400;
            line-height: 1.6;
            letter-spacing: -0.005em;
            margin-bottom: 24px;
            text-align: left;
            background: #F9FAFB;
            padding: 16px;
            border-radius: 12px;
            border: 1px solid #F3F4F6;
        }

        .stats-section {
            background: linear-gradient(135deg, #EFF6FF 0%, #F0FDF4 100%);
            border-radius: 12px;
            padding: 20px;
            margin: 24px 0;
            border: 1px solid #D1FAE5;
        }

        .stats-title {
            color: #2E7D32;
            font-size: 18px;
            font-weight: 600;
            line-height: 1.4;
            letter-spacing: -0.01em;
            margin-bottom: 16px;
            text-align: center;
            position: relative;
        }

        .stats-title::before {
            content: "ğŸ“Š";
            margin-right: 8px;
            font-size: 20px;
            display: inline-block;
        }

        .stats-content {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
        }

        .stat-label {
            color: #6B7280;
            font-size: 14px;
            font-weight: 500;
            line-height: 1.4;
        }

        .stat-value {
            color: #2E7D32;
            font-size: 14px;
            font-weight: 600;
            line-height: 1.4;
        }

        .contact-section {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid #ffccbc;
        }

        .contact-title {
            color: #e65100;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .contact-desc {
            color: #bf360c;
            font-size: 1em;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .contact-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ffccbc;
            border-radius: 12px;
            font-size: 1em;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .contact-input:focus {
            border-color: #ff7043;
        }

        .privacy-notice {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 0.9em;
            color: #666;
        }

        .privacy-checkbox {
            margin-top: 2px;
        }

        .privacy-label {
            line-height: 1.4;
            cursor: pointer;
        }

        .privacy-link {
            color: #ff7043;
            text-decoration: underline;
            cursor: pointer;
        }

        .coupon-section {
            background: #FFFFFF;
            border-radius: 16px;
            padding: 24px;
            margin: 24px 0;
            border: 1px solid #E5E7EB;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }

        .coupon-main-title {
            color: #6B7280;
            font-size: 14px;
            font-weight: 500;
            line-height: 1.4;
            letter-spacing: -0.005em;
            margin-bottom: 8px;
            text-align: center;
        }

        .coupon-title {
            color: #1F2937;
            font-size: 24px;
            font-weight: 700;
            line-height: 1.35;
            letter-spacing: -0.02em;
            margin-bottom: 24px;
            text-align: center;
        }

        .coupon-card {
            background: #F9FAFB;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .coupon-card:hover {
            background: #F3F4F6;
            border-color: #4CAF50;
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.12);
        }

        .coupon-content {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .coupon-icon {
            width: 48px;
            height: 48px;
            background: #4CAF50;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .coupon-text {
            text-align: left;
        }

        .coupon-label {
            color: #6B7280;
            font-size: 12px;
            font-weight: 500;
            line-height: 1.4;
            letter-spacing: -0.005em;
            margin-bottom: 4px;
        }

        .coupon-value {
            color: #1F2937;
            font-size: 18px;
            font-weight: 600;
            line-height: 1.4;
            letter-spacing: -0.01em;
        }

        .coupon-download {
            color: #6B7280;
            font-size: 20px;
            transition: color 0.2s ease;
        }

        .coupon-card:hover .coupon-download {
            color: #4CAF50;
        }

        .coupon-section p {
            color: #6B7280;
            font-size: 14px;
            font-weight: 400;
            line-height: 1.5;
            letter-spacing: -0.005em;
            margin-bottom: 16px;
            text-align: center;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2196F3;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .alert {
            padding: 15px;
            margin: 10px 0;
            border-radius: 15px;
            font-size: 0.9em;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }



        .button-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 24px;
            width: 100%;
            align-items: center;
        }

        .button-group .btn {
            width: 100%;
            max-width: 400px;
        }

        .question-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            height: 40px;
        }

        .back-button {
            background: #F3F4F6;
            border: 1px solid #E5E7EB;
            color: #6B7280;
            font-size: 18px;
            font-weight: 500;
            padding: 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            flex-shrink: 0;
        }

        .back-button:hover {
            background: #E5E7EB;
            border-color: #D1D5DB;
            color: #4B5563;
        }

        .back-button:active {
            transform: translateY(1px);
        }

        .question-counter {
            flex: 1;
            text-align: center;
            color: #6B7280;
            font-size: 14px;
            font-weight: 500;
            line-height: 40px;
            height: 40px;
        }

        .question-spacer {
            width: 40px;
            height: 40px;
            flex-shrink: 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 24px 16px;
                margin: 8px;
                max-width: none;
            }
            h1 {
                font-size: 28px;
                line-height: 1.35;
            }
            h2 {
                font-size: 20px;
                line-height: 1.4;
            }
            .question {
                font-size: 18px;
                line-height: 1.5;
            }
            .subtitle {
                font-size: 15px;
                line-height: 1.6;
                margin-bottom: 32px;
            }
            .main-image {
                font-size: 64px;
                margin: 16px 0;
            }
            .result-card {
                padding: 24px;
                margin: 16px 0;
            }
            .result-emoji {
                font-size: 64px;
            }
            .result-title {
                font-size: 24px;
            }
            .result-badge {
                font-size: 10px;
                padding: 4px 8px;
            }
            .option {
                font-size: 14px;
                padding: 14px;
            }
            .stats-section,
            .coupon-section {
                padding: 16px;
                margin: 16px 0;
            }
            .result-description {
                padding: 14px;
            }
            .footer {
                margin-top: 20px;
            }
            .footer-content {
                font-size: 12px;
            }
            .question-header {
                height: 32px;
                margin-bottom: 16px;
            }
            .back-button {
                width: 32px;
                height: 32px;
                font-size: 16px;
                line-height: 32px;
            }
            .question-counter {
                height: 32px;
                font-size: 13px;
                line-height: 32px;
            }
            .question-spacer {
                width: 32px;
                height: 32px;
            }
        }

        .footer {
            margin-top: 32px;
            text-align: center;
        }

        .footer-content {
            color: #9CA3AF;
            font-size: 12px;
            font-weight: 400;
            line-height: 1.5;
            letter-spacing: -0.005em;
        }

        .share-container {
            background: linear-gradient(135deg, #F5F5DC 0%, #FDF5E6 50%, #FAF0E6 100%);
            padding: 32px;
            border-radius: 20px;
            max-width: 400px;
            margin: 0 auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .share-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .share-title {
            color: #2E7D32;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .share-subtitle {
            color: #6B7280;
            font-size: 14px;
            font-weight: 400;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ë©”ì¸ í™”ë©´ -->
        <div id="main" class="section active">
            <h1>ë‚˜ì˜ ìº í•‘ ìŠ¤íƒ€ì¼ì€?</h1>
            <div class="main-image">ğŸ•ï¸</div>
            <p class="subtitle">
                ë‹¹ì‹ ë§Œì˜ íŠ¹ë³„í•œ ìº í•‘ ìŠ¤íƒ€ì¼ì„ ë°œê²¬í•´ë³´ì„¸ìš”!<br>
                14ê°œì˜ ê°„ë‹¨í•œ ì§ˆë¬¸ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë‚˜ë§Œì˜ ìº í•‘ ì„±í–¥
            </p>
            <button class="btn btn-primary" onclick="startTest()">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
        </div>

        <!-- ì§ˆë¬¸ í™”ë©´ -->
        <div id="question" class="section">
            <div class="question-header">
                <button class="back-button" id="back-btn" onclick="goBack()">
                    <span>â†</span>
                </button>
                <div class="question-counter">
                    <span id="current-q">1</span> / 14
                </div>
                <div class="question-spacer"></div>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <h2 class="question" id="question-text"></h2>
            <div class="options" id="options"></div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="result" class="section">
            <h2>ë‹¹ì‹ ì˜ ìº í•‘ ìŠ¤íƒ€ì¼ì€</h2>
            
            <div class="result-card">
                <div class="result-badge">CAMPING STYLE</div>
                <div class="result-emoji" id="result-emoji"></div>
                <div class="result-title" id="result-title"></div>
                <div class="result-subtitle" id="result-subtitle"></div>
                <div class="result-description" id="result-description"></div>
        </div>

            <div class="stats-section">
                <div class="stats-title">ìº í•‘ ì„±í–¥ ë¶„ì„</div>
                <div class="stats-content">
                    <div class="stat-item">
                        <span class="stat-label">ìº í•‘ ë¹ˆë„:</span>
                        <span class="stat-value" id="frequency-stat"></span>
            </div>
                    <div class="stat-item">
                        <span class="stat-label">ì£¼ìš” ë™ë°˜ì:</span>
                        <span class="stat-value" id="companion-stat"></span>
        </div>
                    <div class="stat-item">
                        <span class="stat-label">ê°™ì€ ìœ í˜•:</span>
                        <span class="stat-value" id="percentage-stat">ì „ì²´ ì‘ë‹µìì˜ ì•½ 6.25%</span>
            </div>
            </div>
        </div>
        
            <div class="coupon-section">
                <div class="coupon-main-title">ë” ì™„ë²½í•œ ìº í•‘ì„ ìœ„í•œ</div>
                <div class="coupon-title">ìº í•‘ì¡± ì „ìš© í˜œíƒ</div>
                
                <div class="coupon-card" id="coupon-btn" onclick="getCoupon()">
                    <div class="coupon-content">
                        <div class="coupon-icon">ğŸ•ï¸</div>
                        <div class="coupon-text">
                            <div class="coupon-label">ìº í•‘ ì¥ë¹„ í• ì¸</div>
                            <div class="coupon-value">ìµœëŒ€ 34,000ì› ì¿ í°í• ì¸</div>
            </div>
                    </div>
                    <div class="coupon-download">â†“</div>
        </div>

                <div id="coupon-result"></div>
            </div>

            <div class="button-group">
                <button class="btn btn-share" onclick="shareResult()">ê³µìœ í•˜ê¸°</button>
                <button class="btn btn-restart" onclick="restartTest()">ë‹¤ì‹œ í•˜ê¸°</button>
        </div>

            <footer class="footer">
                <div class="footer-content">
                    Â© 2025 snowline. All Rights Reserved.
            </div>
            </footer>
            </div>
        </div>

    <!-- ê³µìœ ìš© ìˆ¨ê²¨ì§„ ì»¨í…Œì´ë„ˆ -->
    <div id="share-capture" style="position: absolute; left: -9999px; top: -9999px;">
        <div class="share-container">
            <div class="share-header">
                <div class="share-title">ë‚˜ì˜ ìº í•‘ ìŠ¤íƒ€ì¼</div>
                <div class="share-subtitle">ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ê²°ê³¼</div>
            </div>
            <div class="result-card" id="share-result-card">
                <div class="result-badge">CAMPING STYLE</div>
                <div class="result-emoji" id="share-result-emoji"></div>
                <div class="result-title" id="share-result-title"></div>
                <div class="result-subtitle" id="share-result-subtitle"></div>
                <div class="result-description" id="share-result-description"></div>
        </div>
        </div>
    </div>

    <script>
        // Google Sheets ì—°ë™ ì„¤ì •
        const SHEETS_CONFIG = {
            url: 'https://script.google.com/macros/s/YOUR_GOOGLE_APPS_SCRIPT_DEPLOYMENT_ID/exec', // ì‹¤ì œ Google Apps Script ì›¹ ì•± URLë¡œ êµì²´í•˜ì„¸ìš”
            testSheet: 'í…ŒìŠ¤íŠ¸ê²°ê³¼',
            couponSheet: 'ì¿ í°ë°œê¸‰'
        };

        const questions = [
            {
                q: "ìº í•‘ì„ ê³„íší•  ë•Œ ë‚˜ëŠ”...",
                a: [
                    { text: "ë¯¸ë¦¬ ìƒì„¸í•œ ì¼ì •ì„ ì§œê³  ì¤€ë¹„ë¬¼ì„ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“ ë‹¤", type: "J" },
                    { text: "ëŒ€ëµì ì¸ ê³„íšë§Œ ì„¸ìš°ê³  ì¦‰í¥ì ìœ¼ë¡œ ì¦ê¸´ë‹¤", type: "P" }
                ]
            },
            {
                q: "ìº í•‘ì¥ì—ì„œ ìƒˆë¡œìš´ ì‚¬ëŒë“¤ì„ ë§Œë‚˜ë©´...",
                a: [
                    { text: "ë¨¼ì € ë‹¤ê°€ê°€ì„œ ì¸ì‚¬í•˜ê³  ëŒ€í™”ë¥¼ ì‹œì‘í•œë‹¤", type: "E" },
                    { text: "ìƒëŒ€ë°©ì´ ë¨¼ì € ë§ì„ ê±¸ì–´ì˜¤ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤", type: "I" }
                ]
            },
            {
                q: "ìº í•‘ ìš”ë¦¬ë¥¼ í•  ë•Œ ë‚˜ëŠ”...",
                a: [
                    { text: "ë ˆì‹œí”¼ë¥¼ ì •í™•íˆ ë”°ë¼í•˜ë©° ê³„ëŸ‰ë„ ì •í™•íˆ í•œë‹¤", type: "S" },
                    { text: "ëŒ€ì¶© ê°ìœ¼ë¡œ í•˜ë©´ì„œ ì°½ì˜ì ìœ¼ë¡œ ë³€í˜•í•œë‹¤", type: "N" }
                ]
            },
            {
                q: "1ë…„ì— ëª‡ ë²ˆ ì •ë„ ìº í•‘ì„ í•˜ì‹œë‚˜ìš”?",
                a: [
                    { text: "ì•„ì§ ìº í•‘ ê²½í—˜ì´ ì—†ê±°ë‚˜ 1íšŒ ë¯¸ë§Œ", type: "FREQUENCY", value: "0íšŒ" },
                    { text: "1~2íšŒ ì •ë„", type: "FREQUENCY", value: "1-2íšŒ" },
                    { text: "3~5íšŒ ì •ë„", type: "FREQUENCY", value: "3-5íšŒ" },
                    { text: "6íšŒ ì´ìƒ", type: "FREQUENCY", value: "6íšŒì´ìƒ" }
                ]
            },
            {
                q: "ìº í•‘ ì¥ë¹„ë¥¼ ì„ íƒí•  ë•Œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€...",
                a: [
                    { text: "ê¸°ëŠ¥ì„±ê³¼ ì‹¤ìš©ì„±, ê°€ì„±ë¹„", type: "T" },
                    { text: "ë””ìì¸ê³¼ ëŠë‚Œ, ìº í•‘ ë¶„ìœ„ê¸°", type: "F" }
                ]
            },
            {
                q: "í…íŠ¸ë¥¼ ì¹  ë•Œ ë‚˜ëŠ”...",
                a: [
                    { text: "ì„¤ëª…ì„œë¥¼ ê¼¼ê¼¼íˆ ì½ê³  ìˆœì„œëŒ€ë¡œ ì„¤ì¹˜í•œë‹¤", type: "J" },
                    { text: "ì¼ë‹¨ í•´ë³´ë©´ì„œ ê°ìœ¼ë¡œ ì„¤ì¹˜í•œë‹¤", type: "P" }
                ]
            },
            {
                q: "ì£¼ë¡œ ëˆ„êµ¬ì™€ ìº í•‘ì„ ê°€ì‹œë‚˜ìš”?",
                a: [
                    { text: "í˜¼ìì„œ ììœ ë¡­ê²Œ", type: "COMPANION", value: "í˜¼ì" },
                    { text: "ì—°ì¸ê³¼ ë¡œë§¨í‹±í•˜ê²Œ", type: "COMPANION", value: "ì—°ì¸" },
                    { text: "ê°€ì¡±ê³¼ í•¨ê»˜", type: "COMPANION", value: "ê°€ì¡±" },
                    { text: "ì¹œêµ¬ë“¤ê³¼ ì¦ê²ê²Œ", type: "COMPANION", value: "ì¹œêµ¬" }
                ]
            },
            {
                q: "ìº í•‘ì—ì„œ ê°€ì¥ ì¢‹ì€ ì‹œê°„ì€...",
                a: [
                    { text: "ëª¨ë“  ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ ëª¨ë‹¥ë¶ˆ ì•ì—ì„œ ì´ì•¼ê¸°í•˜ëŠ” ì‹œê°„", type: "E" },
                    { text: "í˜¼ìì„œ ìì—°ì„ ë°”ë¼ë³´ë©° ìƒê°ì— ì ê¸°ëŠ” ì‹œê°„", type: "I" }
                ]
            },
            {
                q: "ìº í•‘ì§€ë¥¼ ì„ íƒí•  ë•Œ ë‚˜ëŠ”...",
                a: [
                    { text: "ì‹œì„¤ì´ ì˜ ê°–ì¶°ì§„ ê²€ì¦ëœ ìº í•‘ì¥ì„ ì„ íƒí•œë‹¤", type: "S" },
                    { text: "ì•„ë¬´ë„ ê°€ë³´ì§€ ì•Šì€ ìˆ¨ê²¨ì§„ ì¥ì†Œë¥¼ ì°¾ì•„ê°„ë‹¤", type: "N" }
                ]
            },
            {
                q: "ìº í•‘ì—ì„œ í…íŠ¸ê°€ ì°¢ì–´ì§€ê±°ë‚˜ ì¥ë¹„ê°€ ê³ ì¥ë‚¬ì„ ë•Œ ë‚˜ëŠ”...",
                a: [
                    { text: "ë…¼ë¦¬ì ìœ¼ë¡œ ì›ì¸ì„ ë¶„ì„í•˜ê³  í•´ê²°ì±…ì„ ì°¾ëŠ”ë‹¤", type: "T" },
                    { text: "í•¨ê»˜ ì˜¨ ì‚¬ëŒë“¤ì„ ë°°ë ¤í•˜ë©° ì°¨ë¶„í•˜ê²Œ ëŒ€ì•ˆì„ ëª¨ìƒ‰í•œë‹¤", type: "F" }
                ]
            },
            {
                q: "ìº í•‘ ì¤‘ ê°‘ì‘ìŠ¤ëŸ° ë¹„ê°€ ì™€ì„œ ê³„íšì´ í‹€ì–´ì¡Œì„ ë•Œ ë‚˜ëŠ”...",
                a: [
                    { text: "ìƒí™©ì„ ë¶„ì„í•´ì„œ ìµœì ì˜ ëŒ€ì²˜ ë°©ì•ˆì„ ì°¾ëŠ”ë‹¤", type: "T" },
                    { text: "ë™í–‰í•œ ì‚¬ëŒë“¤ì´ ì‹¤ë§í•˜ì§€ ì•Šë„ë¡ ë¶„ìœ„ê¸°ë¥¼ ì±™ê¸´ë‹¤", type: "F" }
                ]
            },
            {
                q: "ìº í•‘ ì¼ì •ì„ ì§¤ ë•Œ ë‚˜ëŠ”...",
                a: [
                    { text: "ì‹œê°„ë³„ë¡œ ìƒì„¸í•œ ìŠ¤ì¼€ì¤„ì„ ë§Œë“ ë‹¤", type: "J" },
                    { text: "ê·¸ë•Œê·¸ë•Œ í•˜ê³  ì‹¶ì€ ê²ƒì„ í•œë‹¤", type: "P" }
                ]
            },
            {
                q: "ìº í•‘ì—ì„œ ì—ë„ˆì§€ë¥¼ ì–»ëŠ” ìˆœê°„ì€...",
                a: [
                    { text: "ë‹¤ë¥¸ ìº í¼ë“¤ê³¼ í™œë°œí•˜ê²Œ ì†Œí†µí•  ë•Œ", type: "E" },
                    { text: "ì¡°ìš©í•œ ìì—° ì†ì—ì„œ í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°€ì§ˆ ë•Œ", type: "I" }
                ]
            },
            {
                q: "ìº í•‘ ì¥ë¹„ë¥¼ ì •ë¦¬í•  ë•Œ ë‚˜ëŠ”...",
                a: [
                    { text: "ì‚¬ìš©í•œ ìˆœì„œëŒ€ë¡œ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬í•œë‹¤", type: "S" },
                    { text: "ëŒ€ëµì ìœ¼ë¡œ ë¶„ë¥˜í•´ì„œ ë„£ëŠ”ë‹¤", type: "N" }
                ]
            },
            {
                q: "ìº í•‘ í›„ê¸°ë¥¼ ë‚¨ê¸¸ ë•Œ ë‚˜ëŠ”...",
                a: [
                    { text: "ê°ê´€ì ì¸ ì •ë³´ì™€ íŒì„ ìƒì„¸íˆ ê¸°ë¡í•œë‹¤", type: "T" },
                    { text: "ê°ì •ê³¼ ëŠë‚Œì„ ì¤‘ì‹¬ìœ¼ë¡œ ë”°ëœ»í•˜ê²Œ ì‘ì„±í•œë‹¤", type: "F" }
                ]
            }
        ];

        const results = {
            'ESTJ': { title: 'ì™„ë²½ì£¼ì˜ ë¦¬ë” ìº í¼', subtitle: 'ëª¨ë“  ê²ƒì„ ì™„ë²½í•˜ê²Œ ì¤€ë¹„í•˜ëŠ” ìº í•‘ ëŒ€ì¥', emoji: 'ğŸ‘‘', description: 'ë‹¹ì‹ ì€ ìº í•‘ì˜ ëª¨ë“  ê²ƒì„ ê³„íší•˜ê³  ì‹¤í–‰í•˜ëŠ” íƒ€ê³ ë‚œ ë¦¬ë”ì…ë‹ˆë‹¤. ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ ë¹ ì§ì—†ì´ ì¤€ë¹„í•˜ê³ , íŒ€ì›ë“¤ì˜ ì•ˆì „ê³¼ í¸ì˜ë¥¼ ì±…ì„ì§‘ë‹ˆë‹¤.' },
            'ESTP': { title: 'ì¦‰í¥ì  ëª¨í—˜ê°€', subtitle: 'ì§€ê¸ˆ ì´ ìˆœê°„ì„ ì¦ê¸°ëŠ” ì•¡ì…˜ ìº í¼', emoji: 'ğŸ”¥', description: 'ë‹¹ì‹ ì€ ê³„íšë³´ë‹¤ëŠ” ì¦‰í¥ì„±ì„ ì¤‘ì‹œí•˜ëŠ” ëª¨í—˜ê°€ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì¥ì†Œì™€ ì•¡í‹°ë¹„í‹°ì— ë„ì „í•˜ê¸°ë¥¼ ì¢‹ì•„í•˜ë©°, ìº í•‘ì¥ì—ì„œ ê°€ì¥ í™œë™ì ì…ë‹ˆë‹¤.' },
            'ESFJ': { title: 'ë”°ëœ»í•œ ì¼€ì–´í…Œì´ì»¤', subtitle: 'ëª¨ë‘ë¥¼ ì±™ê¸°ëŠ” ë§ˆìŒ ë”°ëœ»í•œ ìº í¼', emoji: 'ğŸ¤—', description: 'ë‹¹ì‹ ì€ ìº í•‘ì—ì„œ ëª¨ë“  ì‚¬ëŒë“¤ì´ í¸ì•ˆí•˜ê³  ì¦ê²ê²Œ ì§€ë‚¼ ìˆ˜ ìˆë„ë¡ ì„¸ì‹¬í•˜ê²Œ ë°°ë ¤í•©ë‹ˆë‹¤. ë§›ìˆëŠ” ìº í•‘ ìš”ë¦¬ë¥¼ ì¤€ë¹„í•˜ê³  íŒ€ì›ë“¤ì„ ëŒë´…ë‹ˆë‹¤.' },
            'ESFP': { title: 'ììœ ë¡œìš´ ë¶„ìœ„ê¸° ë©”ì´ì»¤', subtitle: 'ìº í•‘ì¥ì„ ì¶•ì œë¡œ ë§Œë“œëŠ” ì¦ê±°ìš´ ìº í¼', emoji: 'ğŸª', description: 'ë‹¹ì‹ ì€ ìº í•‘ì„ í•˜ë‚˜ì˜ í° ì¶•ì œë¡œ ë§Œë“œëŠ” ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤. ììœ ë¡­ê³  ìœ ì—°í•œ ì„±ê²©ìœ¼ë¡œ ì–´ë–¤ ìƒí™©ì—ë„ ì˜ ì ì‘í•©ë‹ˆë‹¤.' },
            'ENTJ': { title: 'ì „ëµì  ìº í•‘ ë§ˆìŠ¤í„°', subtitle: 'íš¨ìœ¨ì„±ì„ ì¶”êµ¬í•˜ëŠ” ìº í•‘ ì „ëµê°€', emoji: 'âš¡', description: 'ë‹¹ì‹ ì€ ìº í•‘ì„ í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ë¡œ ì ‘ê·¼í•˜ëŠ” ì „ëµê°€ì…ë‹ˆë‹¤. ëª©í‘œë¥¼ ì„¤ì •í•˜ê³  ìµœì ì˜ ë°©ë²•ìœ¼ë¡œ ë‹¬ì„±í•˜ë ¤ í•©ë‹ˆë‹¤.' },
            'ENTP': { title: 'ì°½ì˜ì  ì‹¤í—˜ê°€', subtitle: 'ìƒˆë¡œìš´ ìº í•‘ ìŠ¤íƒ€ì¼ì„ ê°œì²™í•˜ëŠ” í˜ì‹ ê°€', emoji: 'ğŸ’¡', description: 'ë‹¹ì‹ ì€ ê¸°ì¡´ì˜ ìº í•‘ ë°©ì‹ì— ì–½ë§¤ì´ì§€ ì•Šê³  ìƒˆë¡œìš´ ë°©ë²•ì„ ì‹œë„í•˜ëŠ” í˜ì‹ ê°€ì…ë‹ˆë‹¤.' },
            'ENFJ': { title: 'ì˜ê°ì„ ì£¼ëŠ” ê°€ì´ë“œ', subtitle: 'ëª¨ë‘ì—ê²Œ ì˜ê°ì„ ì£¼ëŠ” ìº í•‘ ë©˜í† ', emoji: 'ğŸŒŸ', description: 'ë‹¹ì‹ ì€ ìº í•‘ì„ í†µí•´ ì‚¬ëŒë“¤ì—ê²Œ ì˜ê°ê³¼ ê¹¨ë‹¬ìŒì„ ì£¼ëŠ” ë©˜í† ì…ë‹ˆë‹¤. ìì—°ê³¼ì˜ êµê°ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤.' },
            'ENFP': { title: 'ì—´ì •ì  íƒí—˜ê°€', subtitle: 'ë¬´í•œí•œ ê°€ëŠ¥ì„±ì„ ê¿ˆê¾¸ëŠ” ììœ ë¡œìš´ ì˜í˜¼', emoji: 'ğŸ¦‹', description: 'ë‹¹ì‹ ì€ ìº í•‘ì—ì„œ ë¬´í•œí•œ ê°€ëŠ¥ì„±ì„ ë°œê²¬í•˜ëŠ” ììœ ë¡œìš´ ì˜í˜¼ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‚¬ëŒë“¤ê³¼ì˜ ë§Œë‚¨ì„ ì†Œì¤‘íˆ ì—¬ê¹ë‹ˆë‹¤.' },
            'ISTJ': { title: 'ì‹ ì¤‘í•œ ì „í†µì£¼ì˜ì', subtitle: 'ê²€ì¦ëœ ë°©ë²•ìœ¼ë¡œ ì•ˆì „í•œ ìº í•‘ì„ ì¦ê¸°ëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ìº í¼', emoji: 'ğŸ›¡ï¸', description: 'ë‹¹ì‹ ì€ ê²€ì¦ëœ ë°©ë²•ê³¼ ì „í†µì ì¸ ìº í•‘ ìŠ¤íƒ€ì¼ì„ ì„ í˜¸í•©ë‹ˆë‹¤. ì² ì €í•œ ì¤€ë¹„ì™€ ê³„íšìœ¼ë¡œ ì•ˆì „í•œ ìº í•‘ì„ ë§Œë“­ë‹ˆë‹¤.' },
            'ISTP': { title: 'ì‹¤ìš©ì  ê¸°ìˆ ì', subtitle: 'ë›°ì–´ë‚œ ì†ê¸°ìˆ ë¡œ ëª¨ë“  ê²ƒì„ í•´ê²°í•˜ëŠ” ìº í•‘ ì¥ì¸', emoji: 'ğŸ”§', description: 'ë‹¹ì‹ ì€ ì‹¤ìš©ì ì´ê³  ê¸°ìˆ ì ì¸ ì ‘ê·¼ìœ¼ë¡œ ìº í•‘ì˜ ë‹¬ì¸ì´ ë©ë‹ˆë‹¤. ì¥ë¹„ë¥¼ ëŠ¥ìˆ™í•˜ê²Œ ë‹¤ë£¹ë‹ˆë‹¤.' },
            'ISFJ': { title: 'ì¡°ìš©í•œ ìˆ˜í˜¸ì', subtitle: 'ë¬µë¬µíˆ ëª¨ë“  ê²ƒì„ ì±™ê¸°ëŠ” ë“ ë“ í•œ ì§€ì›êµ°', emoji: 'ğŸ•Šï¸', description: 'ë‹¹ì‹ ì€ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ í¸ì•ˆí•˜ê²Œ ìº í•‘í•  ìˆ˜ ìˆë„ë¡ ì¡°ìš©íˆ ë’·ë°”ë¼ì§€í•˜ëŠ” ìˆ˜í˜¸ìì…ë‹ˆë‹¤.' },
            'ISFP': { title: 'ê°ì„±ì  ì˜ˆìˆ ê°€', subtitle: 'ìì—°ê³¼ í•˜ë‚˜ ë˜ëŠ” ìˆœìˆ˜í•œ ë§ˆìŒì˜ ìº í¼', emoji: 'ğŸ¨', description: 'ë‹¹ì‹ ì€ ìì—°ì˜ ì•„ë¦„ë‹¤ì›€ì„ ì˜¨ëª¸ìœ¼ë¡œ ëŠë¼ë©° ìº í•‘í•˜ëŠ” ì˜ˆìˆ ê°€ì…ë‹ˆë‹¤. ì¡°ìš©í•œ ìì—° ì†ì—ì„œ ë‚´ë©´ì˜ í‰í™”ë¥¼ ì°¾ìŠµë‹ˆë‹¤.' },
            'INTJ': { title: 'ì™„ë²½ì£¼ì˜ ì„¤ê³„ì', subtitle: 'ì´ìƒì ì¸ ìº í•‘ì„ ì„¤ê³„í•˜ëŠ” ì „ëµì  ì‚¬ê³ ê°€', emoji: 'ğŸ—ï¸', description: 'ë‹¹ì‹ ì€ ì™„ë²½í•œ ìº í•‘ ì‹œìŠ¤í…œì„ ì„¤ê³„í•˜ê³  êµ¬í˜„í•˜ëŠ” ì„¤ê³„ìì…ë‹ˆë‹¤. íš¨ìœ¨ì„±ê³¼ í’ˆì§ˆì„ ëª¨ë‘ ì¶”êµ¬í•©ë‹ˆë‹¤.' },
            'INTP': { title: 'ë¶„ì„ì  íƒêµ¬ì', subtitle: 'ìº í•‘ì˜ ì›ë¦¬ë¥¼ íƒêµ¬í•˜ëŠ” ì‚¬ìƒ‰ê°€', emoji: 'ğŸ”¬', description: 'ë‹¹ì‹ ì€ ìº í•‘ì˜ ëª¨ë“  ìš”ì†Œë¥¼ ë¶„ì„í•˜ê³  ì´í•´í•˜ë ¤ëŠ” íƒêµ¬ìì…ë‹ˆë‹¤. ë…¼ë¦¬ì ì´ê³  ì²´ê³„ì ì¸ ì ‘ê·¼ì„ í•©ë‹ˆë‹¤.' },
            'INFJ': { title: 'ì‹ ë¹„ë¡œìš´ ëª½ìƒê°€', subtitle: 'ìì—°ê³¼ ê¹Šì€ êµê°ì„ ë‚˜ëˆ„ëŠ” ì˜ì  íƒí—˜ê°€', emoji: 'ğŸŒ™', description: 'ë‹¹ì‹ ì€ ìº í•‘ì„ í†µí•´ ìì—°ê³¼ ê¹Šì€ ì˜ì  êµê°ì„ ë‚˜ëˆ„ëŠ” ëª½ìƒê°€ì…ë‹ˆë‹¤. í˜¼ìë§Œì˜ ì‹œê°„ì„ ì†Œì¤‘íˆ ì—¬ê¹ë‹ˆë‹¤.' },
            'INFP': { title: 'ì´ìƒì£¼ì˜ ì‹œì¸', subtitle: 'ìì—°ì—ì„œ ì˜ê°ì„ ë°›ëŠ” ìˆœìˆ˜í•œ ì´ìƒì£¼ì˜ì', emoji: 'ğŸ“', description: 'ë‹¹ì‹ ì€ ìì—°ì—ì„œ ì˜ê°ì„ ë°›ì•„ ë‚´ë©´ì˜ ì´ìƒì„ ì¶”êµ¬í•˜ëŠ” ì‹œì¸ì…ë‹ˆë‹¤. ê°œì¸ì ì¸ ê°€ì¹˜ì™€ ì˜ë¯¸ë¥¼ ì¤‘ì‹œí•©ë‹ˆë‹¤.' }
        };

        let currentQuestion = 0;
        let answers = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
        let userResponses = [];
        let answerHistory = []; // ë’¤ë¡œê°€ê¸°ë¥¼ ìœ„í•œ ë‹µë³€ íˆìŠ¤í† ë¦¬
        let testStartTime = null;
        let additionalData = {
            frequency: '',
            companion: ''
        };



        // Google Sheetsì— ë°ì´í„° ì „ì†¡
        async function sendToGoogleSheets(data, sheetType = 'test') {
            try {
                const response = await fetch(SHEETS_CONFIG.url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        action: sheetType === 'test' ? 'save_test_result' : 'issue_coupon',
                        ...data
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    console.log('Google Sheetsì— ë°ì´í„° ì €ì¥ ì™„ë£Œ:', result.message);
                    return result;
                } else {
                    throw new Error(result.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜');
                }
            } catch (error) {
                console.error('Google Sheets ì €ì¥ ì‹¤íŒ¨:', error);
                return false;
            }
        }

        async function updatePercentageStats(resultType) {
            try {
                // í†µê³„ ì¡°íšŒ API í˜¸ì¶œ
                const apiUrl = `${SHEETS_CONFIG.url}?action=get_stats`;
                console.log('í†µê³„ ì¡°íšŒ API í˜¸ì¶œ:', apiUrl);
                
                const response = await fetch(apiUrl, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ì˜¤ë¥˜: ${response.status}`);
                }
                
                const result = await response.json();
                console.log('í†µê³„ ì¡°íšŒ ì‘ë‹µ:', result);
                
                if (result.status === 'success' && result.data) {
                    const stats = result.data;
                    const currentTypeStats = stats.mbti_stats[resultType];
                    
                    if (currentTypeStats && stats.total_responses > 0) {
                        const percentage = currentTypeStats.percentage;
                        const count = currentTypeStats.count;
                        
                        document.getElementById('percentage-stat').textContent = 
                            `ì „ì²´ ì‘ë‹µìì˜ ì•½ ${percentage}% (${count}/${stats.total_responses}ëª…)`;
                    } else {
                        document.getElementById('percentage-stat').textContent = 
                            'ì „ì²´ ì‘ë‹µìì˜ ì•½ 0% (ì²« ë²ˆì§¸ ì‘ë‹µì!)';
                    }
                } else {
                    throw new Error('í†µê³„ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
            } catch (error) {
                console.error('í†µê³„ ì¡°íšŒ ì‹¤íŒ¨:', error);
                // ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ê°’ í‘œì‹œ
                document.getElementById('percentage-stat').textContent = 'ì „ì²´ ì‘ë‹µìì˜ ì•½ 6.25%';
            }
        }

        function startTest() {
            testStartTime = new Date();
            currentQuestion = 0;
            answers = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            userResponses = [];
            answerHistory = [];
            additionalData = { frequency: '', companion: '' };
            
            document.getElementById('main').classList.remove('active');
            document.getElementById('question').classList.add('active');
            showQuestion();
        }

        function goBack() {
            if (currentQuestion === 0) {
                // ì²« ë²ˆì§¸ ì§ˆë¬¸ì—ì„œëŠ” ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                document.getElementById('question').classList.remove('active');
                document.getElementById('main').classList.add('active');
                return;
            }
            
            // ì´ì „ ì§ˆë¬¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            currentQuestion--;
            
            // ì´ì „ ë‹µë³€ ë³µì›
            if (answerHistory.length > 0) {
                const prevState = answerHistory.pop();
                answers = { ...prevState.answers };
                additionalData = { ...prevState.additionalData };
                userResponses.pop();
            }
            
            showQuestion();
        }



        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('current-q').textContent = currentQuestion + 1;
            document.getElementById('progress').style.width = ((currentQuestion + 1) / questions.length * 100) + '%';
            document.getElementById('question-text').textContent = question.q;
            
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';
            
            question.a.forEach((answer) => {
                const option = document.createElement('div');
                option.className = 'option';
                option.textContent = answer.text;
                option.onclick = () => selectAnswer(answer.type, answer.text, answer.value);
                optionsDiv.appendChild(option);
            });
        }

        function selectAnswer(type, text, value) {
            // í˜„ì¬ ìƒíƒœë¥¼ íˆìŠ¤í† ë¦¬ì— ì €ì¥ (ë’¤ë¡œê°€ê¸°ë¥¼ ìœ„í•´)
            answerHistory.push({
                answers: { ...answers },
                additionalData: { ...additionalData }
            });
            
            if (type === 'FREQUENCY') {
                additionalData.frequency = value;
            } else if (type === 'COMPANION') {
                additionalData.companion = value;
            } else {
                answers[type]++;
            }
            
            userResponses.push({
                questionNumber: currentQuestion + 1,
                question: questions[currentQuestion].q,
                answer: text,
                type: type,
                value: value || null,
                timestamp: new Date().toISOString()
            });
            
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                setTimeout(showQuestion, 300);
            } else {
                setTimeout(showResult, 300);
            }
        }

        function calculateResult() {
            let result = '';
            result += answers.E > answers.I ? 'E' : 'I';
            result += answers.S > answers.N ? 'S' : 'N';
            result += answers.T > answers.F ? 'T' : 'F';
            result += answers.J > answers.P ? 'J' : 'P';
            return result;
        }

        async function showResult() {
            const resultType = calculateResult();
            const result = results[resultType];
            const testEndTime = new Date();
            const testDuration = Math.round((testEndTime - testStartTime) / 1000);
            
            document.getElementById('question').classList.remove('active');
            document.getElementById('result').classList.add('active');
            
            document.getElementById('result-emoji').textContent = result.emoji;
            document.getElementById('result-title').textContent = result.title;
            document.getElementById('result-subtitle').textContent = result.subtitle;
            document.getElementById('result-description').textContent = result.description;
            
            // í†µê³„ ì •ë³´ í‘œì‹œ
            document.getElementById('frequency-stat').textContent = additionalData.frequency || 'ë¯¸ì‘ë‹µ';
            document.getElementById('companion-stat').textContent = additionalData.companion || 'ë¯¸ì‘ë‹µ';
            
            // ì‹¤ì‹œê°„ í†µê³„ ì¡°íšŒ ë° í‘œì‹œ
            await updatePercentageStats(resultType);
            
            setPersonalizedCouponMessage(result.title);
            
            // Google Sheetsì— í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì €ì¥
            const testData = {
                timestamp: testStartTime.toISOString(),
                result_type: resultType,
                result_title: result.title,
                responses: userResponses,
                ip_address: '',
                user_agent: navigator.userAgent,
                referrer: document.referrer || ''
            };
            
            await sendToGoogleSheets(testData, 'test');
        }

        function setPersonalizedCouponMessage(resultTitle) {
            const personalOfferElement = document.getElementById('personal-offer');
            
            const personalMessages = {
                'ì™„ë²½ì£¼ì˜ ë¦¬ë” ìº í¼': 'ë¦¬ë”ë‹˜ë§Œì„ ìœ„í•œ í”„ë¦¬ë¯¸ì—„ ìº í•‘ ì¥ë¹„ 20% í• ì¸, ë†“ì¹˜ë©´ í›„íšŒí•  ê¸°íšŒì˜ˆìš”',
                'ì¦‰í¥ì  ëª¨í—˜ê°€': 'ëª¨í—˜ê°€ ìŠ¤íƒ€ì¼ì— ë”± ë§ëŠ” ìº í•‘ ì¥ë¹„ë¥¼ 20% í• ì¸ê°€ì— ë§Œë‚˜ë³´ì„¸ìš”',
                'ë”°ëœ»í•œ ì¼€ì–´í…Œì´ì»¤': 'ê°€ì¡± ëª¨ë‘ê°€ í–‰ë³µí•œ ìº í•‘ì„ ìœ„í•œ íŠ¹ë³„ í• ì¸, ì§€ê¸ˆì´ ê¸°íšŒì˜ˆìš”',
                'ììœ ë¡œìš´ ë¶„ìœ„ê¸° ë©”ì´ì»¤': 'ììœ ë¡œìš´ ë‹¹ì‹ ì˜ ìº í•‘ ë¼ì´í”„ë¥¼ ì™„ì„±í•  ì¥ë¹„ë¥¼ íŠ¹ê°€ë¡œ ì¤€ë¹„í–ˆì–´ìš”',
                'ì „ëµì  ìº í•‘ ë§ˆìŠ¤í„°': 'ì „ëµê°€ë‹µê²Œ ë˜‘ë˜‘í•œ ì„ íƒ! ìµœê³  íš¨ìœ¨ì˜ ìº í•‘ ì¥ë¹„ë¥¼ 20% í• ì¸ë°›ìœ¼ì„¸ìš”',
                'ì°½ì˜ì  ì‹¤í—˜ê°€': 'ìƒˆë¡œìš´ ìº í•‘ì„ ê¿ˆê¾¸ëŠ” ë‹¹ì‹ ê»˜ í˜ì‹ ì ì¸ ì¥ë¹„ í• ì¸ ê¸°íšŒë¥¼ ë“œë ¤ìš”',
                'ì˜ê°ì„ ì£¼ëŠ” ê°€ì´ë“œ': 'ë©˜í†  ìŠ¤íƒ€ì¼ ìº í¼ë¥¼ ìœ„í•œ í”„ë¦¬ë¯¸ì—„ ì¥ë¹„, íŠ¹ë³„ê°€ë¡œ ë§Œë‚˜ë³´ì„¸ìš”',
                'ì—´ì •ì  íƒí—˜ê°€': 'ì—´ì • ë„˜ì¹˜ëŠ” ìº í¼ë¥¼ ìœ„í•œ ë§ì¶¤ ì¥ë¹„ í• ì¸, ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”',
                'ì‹ ì¤‘í•œ ì „í†µì£¼ì˜ì': 'ë¯¿ì„ ìˆ˜ ìˆëŠ” ë¸Œëœë“œì˜ ê²€ì¦ëœ ìº í•‘ ì¥ë¹„ë¥¼ 20% í• ì¸ë°›ìœ¼ì„¸ìš”',
                'ì‹¤ìš©ì  ê¸°ìˆ ì': 'ê¸°ìˆ ì ìŠ¤íƒ€ì¼ì— ë”± ë§ëŠ” ê³ ì„±ëŠ¥ ìº í•‘ ì¥ë¹„, íŠ¹ê°€ë¡œ ì¤€ë¹„í–ˆì–´ìš”',
                'ì¡°ìš©í•œ ìˆ˜í˜¸ì': 'í¸ì•ˆí•˜ê³  ì•ˆì „í•œ ìº í•‘ì„ ìœ„í•œ í•„ìˆ˜ ì¥ë¹„ë¥¼ íŠ¹ë³„ê°€ì— ë“œë ¤ìš”',
                'ê°ì„±ì  ì˜ˆìˆ ê°€': 'ê°ì„± ìº í¼ë¥¼ ìœ„í•œ ì•„ë¦„ë‹¤ìš´ ìº í•‘ ì¥ë¹„, 20% í• ì¸ìœ¼ë¡œ ë§Œë‚˜ë³´ì„¸ìš”',
                'ì™„ë²½ì£¼ì˜ ì„¤ê³„ì': 'ì™„ë²½ì„ ì¶”êµ¬í•˜ëŠ” ë‹¹ì‹ ì„ ìœ„í•œ ìµœê³ ê¸‰ ìº í•‘ ì¥ë¹„ë¥¼ í• ì¸ê°€ì—',
                'ë¶„ì„ì  íƒêµ¬ì': 'ë˜‘ë˜‘í•œ ì„ íƒ! ë¶„ì„ë ¥ ìˆëŠ” ìº í¼ë¥¼ ìœ„í•œ í•©ë¦¬ì  ê°€ê²©ì˜ ì¥ë¹„ì˜ˆìš”',
                'ì‹ ë¹„ë¡œìš´ ëª½ìƒê°€': 'ìì—°ê³¼ í•˜ë‚˜ë˜ëŠ” íŠ¹ë³„í•œ ìº í•‘ì„ ìœ„í•œ ì¥ë¹„ë¥¼ í• ì¸ê°€ì— ë“œë ¤ìš”',
                'ì´ìƒì£¼ì˜ ì‹œì¸': 'ì´ìƒì ì¸ ìº í•‘ ë¼ì´í”„ë¥¼ ìœ„í•œ ê°ì„± ì¥ë¹„, íŠ¹ë³„ í• ì¸ìœ¼ë¡œ ì¤€ë¹„í–ˆì–´ìš”'
            };
            
            const message = personalMessages[resultTitle] || 'ë‹¹ì‹  ê°™ì€ ìº í¼ë¥¼ ìœ„í•œ íŠ¹ë³„í•œ 20% í• ì¸, ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•´ë³´ì„¸ìš”';
            personalOfferElement.textContent = message;
        }

        async function getCoupon() {
            const couponBtn = document.getElementById('coupon-btn');
            const couponResult = document.getElementById('coupon-result');
            
            couponBtn.disabled = true;
            couponBtn.innerHTML = 'ì¿ í° ë°œê¸‰ ì¤‘<span class="loading"></span>';
            
            try {
                const resultType = calculateResult();
                
                // Google Sheetsì— ì¿ í° ë°œê¸‰ ìš”ì²­
                const couponData = {
                    result_type: resultType,
                    ip_address: '',
                    user_agent: navigator.userAgent
                };
                
                const result = await sendToGoogleSheets(couponData, 'coupon');
                
                if (result && result.success) {
                    const couponCode = result.data?.coupon_code || `CAMPING${Math.random().toString(36).substr(2, 8).toUpperCase()}`;
                    
                    couponResult.innerHTML = `
                        <div class="alert alert-success">
                            ğŸ‰ ì¿ í°ì´ ë°œê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤!<br>
                            <strong>ì¿ í°ì½”ë“œ: ${couponCode}</strong><br>
                            <small>* ìº í•‘ìš©í’ˆ ì‡¼í•‘ëª°ì—ì„œ ì‚¬ìš©í•˜ì„¸ìš”</small>
                        </div>
                    `;
                    couponBtn.style.display = 'none';
                } else {
                    throw new Error(result?.message || 'ì¿ í° ë°œê¸‰ ì‹¤íŒ¨');
                }
                
            } catch (error) {
                console.error('ì¿ í° ë°œê¸‰ ì‹¤íŒ¨:', error);
                couponResult.innerHTML = `
                    <div class="alert alert-error">
                        ì¿ í° ë°œê¸‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.<br>
                        <small>ì˜¤ë¥˜: ${error.message}</small>
                    </div>
                `;
                couponBtn.disabled = false;
                couponBtn.innerHTML = `
                    <div class="coupon-content">
                        <div class="coupon-icon">ğŸ•ï¸</div>
                        <div class="coupon-text">
                            <div class="coupon-label">ìº í•‘ ì¥ë¹„ í• ì¸</div>
                            <div class="coupon-value">ìµœëŒ€ 34,000ì› ì¿ í°í• ì¸</div>
                        </div>
                    </div>
                    <div class="coupon-download">â†“</div>
                `;
            }
        }

        async function shareResult() {
            const resultType = calculateResult();
            const result = results[resultType];
            const shareText = `ë‚˜ì˜ ìº í•‘ ìŠ¤íƒ€ì¼: ${result.title}\n${result.subtitle}\n\ní…ŒìŠ¤íŠ¸ í•´ë³´ê¸°: ${window.location.href}`;
            
            try {
                // ê²°ê³¼ ì˜ì—­ì„ ì´ë¯¸ì§€ë¡œ ë³€í™˜
                const resultElement = document.getElementById('result');
                const canvas = await html2canvas(resultElement, {
                    backgroundColor: '#FFFFFF',
                    scale: 2, // ê³ í™”ì§ˆì„ ìœ„í•´ ìŠ¤ì¼€ì¼ ì—…
                    useCORS: true,
                    allowTaint: true,
                    width: resultElement.offsetWidth,
                    height: resultElement.offsetHeight
                });
                
                // ìº”ë²„ìŠ¤ë¥¼ Blobìœ¼ë¡œ ë³€í™˜
                canvas.toBlob(async (blob) => {
                    const imageFile = new File([blob], 'camping-style-result.png', { type: 'image/png' });
                    
                    // Web Share APIë¥¼ ì§€ì›í•˜ëŠ” ê²½ìš° (ì£¼ë¡œ ëª¨ë°”ì¼)
                    if (navigator.share && navigator.canShare && navigator.canShare({ files: [imageFile] })) {
                        try {
                            await navigator.share({
                                title: 'ë‚˜ì˜ ìº í•‘ ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸',
                                text: shareText,
                                files: [imageFile]
                            });
                        } catch (shareError) {
                            console.log('Share cancelled or failed:', shareError);
                            // ê³µìœ ê°€ ì·¨ì†Œë˜ì—ˆê±°ë‚˜ ì‹¤íŒ¨í•œ ê²½ìš° ì´ë¯¸ì§€ë§Œ ë‹¤ìš´ë¡œë“œ
                            downloadImage(canvas, 'camping-style-result.png');
                        }
            } else {
                        // Web Share APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš° (ì£¼ë¡œ ë°ìŠ¤í¬í†±)
                        // ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œì™€ í…ìŠ¤íŠ¸ ë³µì‚¬ ì œê³µ
                        const userChoice = confirm('ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\ní™•ì¸: ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ\nì·¨ì†Œ: í…ìŠ¤íŠ¸ë§Œ ë³µì‚¬');
                        
                        if (userChoice) {
                            downloadImage(canvas, 'camping-style-result.png');
                        } else {
                            if (navigator.clipboard) {
                                navigator.clipboard.writeText(shareText);
                                alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                            } else {
                                alert('ê³µìœ í•˜ê¸°: ' + shareText);
                            }
                        }
                    }
                }, 'image/png');
                
            } catch (error) {
                console.error('ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨:', error);
                // ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨ ì‹œ í…ìŠ¤íŠ¸ë§Œ ê³µìœ 
                if (navigator.share) {
                    navigator.share({
                        title: 'ë‚˜ì˜ ìº í•‘ ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸',
                        text: shareText
                    });
                } else {
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText(shareText);
                        alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    } else {
                        alert('ê³µìœ í•˜ê¸°: ' + shareText);
                    }
                }
            }
        }
        
        function downloadImage(canvas, filename) {
            const link = document.createElement('a');
            link.download = filename;
            link.href = canvas.toDataURL('image/png');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // ë‹¤ìš´ë¡œë“œ í›„ ì•Œë¦¼
            setTimeout(() => {
                alert('ì´ë¯¸ì§€ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\nê²°ê³¼ë¥¼ SNSì— ê³µìœ í•´ë³´ì„¸ìš” ğŸ‰');
            }, 500);
        }

        function restartTest() {
            currentQuestion = 0;
            answers = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            userResponses = [];
            testStartTime = null;
            additionalData = { frequency: '', companion: '' };
            
            document.getElementById('result').classList.remove('active');
            document.getElementById('main').classList.add('active');
            
            // ì¿ í° ì„¹ì…˜ ì´ˆê¸°í™”
            document.getElementById('coupon-btn').disabled = false;
            document.getElementById('coupon-btn').innerHTML = `
                <div class="coupon-content">
                    <div class="coupon-icon">ğŸ•ï¸</div>
                    <div class="coupon-text">
                        <div class="coupon-label">ìº í•‘ ì¥ë¹„ í• ì¸</div>
                        <div class="coupon-value">ìµœëŒ€ 34,000ì› ì¿ í°í• ì¸</div>
                    </div>
                </div>
                <div class="coupon-download">â†“</div>
            `;
            document.getElementById('coupon-btn').style.display = 'block';
            document.getElementById('coupon-result').innerHTML = '';
        }

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ
        window.addEventListener('load', () => {
            console.log('MBTI ìº í•‘ ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ');
        });

        // ê°œë°œììš© ë°ì´í„° ì¡°íšŒ í•¨ìˆ˜
        function getCampingTestData() {
            return {
                currentTest: {
                    question: currentQuestion,
                    answers: answers,
                    responses: userResponses,
                    additionalData: additionalData
                },
                sheetsConfig: SHEETS_CONFIG
            };
        }

        // ì „ì—­ í•¨ìˆ˜ë¡œ ë…¸ì¶œ
        window.getCampingTestData = getCampingTestData;
    </script>
</body>
</html>
